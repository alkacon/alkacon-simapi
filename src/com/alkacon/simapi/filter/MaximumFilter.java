/* * Copyright (C) Jerry Huxtable 1998 */package com.alkacon.simapi.filter;import java.awt.*;import java.awt.image.*;public class MaximumFilter extends WholeImageFilter {	public MaximumFilter() {	}	public void imageComplete(int status) {		if (status == IMAGEERROR || status == IMAGEABORTED) {			consumer.imageComplete(status);			return;		}		int width = originalSpace.width;		int height = originalSpace.height;		int index = 0;		int[] outPixels = new int[width * height];		for (int y = 0; y < height; y++) {			for (int x = 0; x < width; x++) {				int pixel = 0xff000000;				for (int dy = -1; dy <= 1; dy++) {					int iy = y+dy;					int ioffset;					if (0 <= iy && iy < height) {						ioffset = iy*width;						for (int dx = -1; dx <= 1; dx++) {							int ix = x+dx;							if (0 <= ix && ix < width) {								pixel = PixelUtils.combinePixels(pixel, inPixels[ioffset+ix], PixelUtils.MAX);							}						}					}				}				outPixels[index++] = pixel;			}		}		consumer.setPixels(0, 0, width, height, defaultRGBModel, outPixels, 0, width);		consumer.imageComplete(status);		inPixels = null;	}	public String toString() {		return "Blur/Maximum";	}}